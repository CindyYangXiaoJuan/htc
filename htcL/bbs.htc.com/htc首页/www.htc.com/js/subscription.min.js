$(document).ready(function(c){var b=c("header").data("app-version"),e=location.hostname,a=(e.indexOf("local")>=0||(typeof b==="undefined")||(b==undefined))?"":".min",d=(e.indexOf("local")>=0||(typeof b==="undefined")||(b==undefined))?"":"/v"+b;c("html head").prepend('<script src="/assets/layout/js'+d+"/formUtils"+a+'.js" type="text/javascript" async><\/script>')});function openNewsletter(){$(".newsletter").animate({height:120},200,function(){$(".newsletter").find(".customer").show();$(".newsletter").find(".privacy").show();$(".newsletter").find(".customer input").attr("required","required")})}function closeNewsletter(){$(".newsletter").find(".privacy").hide();$(".newsletter").find(".customer").hide();$(".newsletter").find(".customer input").removeAttr("required","required");$(".newsletter").animate({height:50},200,function(){$(".newsletter .button input").removeClass("active");$(".newsletter .button input").addClass("active")})}var Site=(function(b){var a=function(){var c=this;a.prototype.emailAddPDP="";if(b(".newsletter").length){b(".newsletter .email input").focus(function(){openNewsletter()});b(".newsletter .email input").blur(function(){if(b(".newsletter .email input").val().length==0){b("html").click(function(){closeNewsletter();b("#newsletter-error-message").hide();if(isMobile()){b(".email .error-mobile").hide()}});b(".newsletter").click(function(d){d.stopPropagation()})}});b("#newsletter").submit(function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}var g=b(".newsletter .email input").val(),d=(isEmail(g))?true:false;if(d==true&&b("input[name='existingCustomer']").is(":checked")){b("#newsletter-error-message").hide();if(isMobile()){b(".email .error-mobile").hide()}c.subscriptionSubmission("newsletter")}else{b("#newsletter-error-message").show();if(isMobile()){b(".email .error-mobile").show()}}})}a.prototype.subscriptionSubmission=function(e,n,s,h,o){var d=function(G){return G<10?"0"+G:G};var C="htc-newsletter",t="newsletter",p="true",k="false",m=window.location.href,i=new Date(),u=i.getUTCFullYear()+"-"+d(i.getUTCMonth()+1)+"-"+d(i.getUTCDate())+"T"+d(i.getUTCHours())+":"+d(i.getUTCMinutes())+":"+d(i.getUTCSeconds())+"-00:00";n=(typeof n==="undefined")?"signup-footer":n;s=(typeof s==="undefined")?"":s;h=(typeof h==="undefined")?"":h;var A=c.getLocale();m=(m.indexOf("local")<0)?m:m.replace(location.hostname+":"+location.port,"adev-www.htc.com");var v=location.hostname,x=(v.indexOf("local")>=0)?"adev-":location.hostname,f="aws.htc.com/htc-subscription-1.6";var l=x.indexOf("-"),B=(l>=0)?x.substring(0,l+1):"",y="https://"+B+f,z=y+"/profile?callback=?";switch(e){case"newsletter":var E=b("#newsletter .email input").val(),F=b(".newsletter input[name=existingCustomer]:checked").val(),D=(F=="Yes")?"customer":"prospect";break;case"reviews":var E=b(".review-form input.email").val(),D="customer";C="htc-reviews";break;case"pdp":var E=c.emailAddPDP,D="customer";break;case"header":var E=b("#HtcSignup input#emailtext").val(),j=b("#HtcSignup .custom-selector.carrier-selector .dropper"),q=b("#HtcSignup .btnYN.Y"),D=(q.hasClass("active"))?"customer":"prospect";p=b("#HtcSignup input#subscriptchecker").is(":checked");if(j.hasClass("selected")){var g=j.data("value")}var r={carrier:g};break;case"comingsoon":var E=b(".signup form#signup input[name=email]").val(),D="prospect";break;case"freescroll-pdp":var E=b(".signup-area input[type=email]").val().trim(),j=(b(".signup-area select").length>0)?b(".signup-area select").val().trim():"",q=b(".signup-area .question .answers > div.active").attr("data-selection"),D=(q=="yes")?"customer":"prospect";var r={carrier:j};p=(b(".signup-area .checkbox-area").hasClass("valid"))?"true":"false";k="true";break;default:var E=(typeof o==="undefined"||o=="")?"":o,D=(typeof o==="undefined")?"prospect":"customer";break}var w={app_id:C,email:E,lang:A.languages,zip:"",country:A.countrySite,ip:"0.0.0.0",date:u,s_type:D,s_agreement:"true",s_welcome:"true",s_newsletter:p,s_product:k,r_url:m,r_campaign:t,r_cta:n,r_pid:s,r_pname:h,ws_echo:"false"};if(r!==undefined){w.misc=r}b.ajax({type:"GET",url:z,data:w,dataType:"json",jsonp:true,async:true,success:function(H){if(H.status=="success"){switch(e){case"newsletter":closeNewsletter();b("div.newsletter form").hide();b("div.newsletter .success").show();break;case"pdp":b(".email-signup .signup-form").fadeOut(300,function(){b("form.signup-form input.launch-email").removeClass("invalid");b(".email-signup .error-message").hide();b(".email-signup .confirmation-message").fadeIn(300)});break;case"freescroll-pdp":b(".signup-submit").addClass("disable");setTimeout(function(){if(isMobile()==false){b(".signup-area").fadeOut(300,function(){b(".signup-confirmation").fadeIn(300)})}else{b(".signup-area").hide();b(".signup-confirmation").show()}},1000);break;case"header":b(".form-block").hide();b(".thank-you-wrapper").show();b(".thank-you-wrapper .signup-closer").on("click",function(I){if(I.preventDefault){I.preventDefault()}else{I.returnValue=false}b(".signup-popover").removeClass("active")});signupInterval=setInterval(function(){if(b(".signup-popover").hasClass("active")){b(".signup-popover").removeClass("active")}else{clearInterval(signupInterval)}},3000);break;case"comingsoon":b(".signup .error-message").hide();b("form#signup").hide();b("div.signup").append("<div>Thank you!</div>");break;default:break}}if(H.status=="failed"){switch(e){case"newsletter":closeNewsletter();b("div.newsletter form").hide();if(isMobile()){b(".email .error-mobile").show()}else{b("div.newsletter .error").show()}break;case"pdp":b(".email-signup .error-message").show();b("form.signup-form input.launch-email").addClass("invalid");break;case"freescroll-pdp":b(".signup-confirmation").hide();b(".signup-area").show();b(".signup-submit").removeClass("disable");b(".signup-area .error-message").show();break;case"header":var G=b("input#emailtext").data("msg-required");b(".top-item.signup .signup-popover").addClass("active");b("#HtcSignup #emailtext-error").text(G);b("#HtcSignup #emailtext-error").show();break;case"comingsoon":b(".signup .error-message").show();break;default:break}}},error:function(H,J,I){switch(e){case"newsletter":closeNewsletter();b("div.newsletter form").hide();if(isMobile()){b(".email .error-mobile").show()}else{b("div.newsletter .error").show()}break;case"pdp":b(".email-signup .error-message").show();b("form.signup-form input.launch-email").addClass("invalid");break;case"freescroll-pdp":b(".signup-confirmation").hide();b(".signup-area").show();b(".signup-submit").removeClass("disable");b(".signup-area .error-message").show();break;case"header":var G=b("input#emailtext").data("msg-required");b(".top-item.signup .signup-popover").addClass("active");b("#HtcSignup #emailtext-error").text(G);b("#HtcSignup #emailtext-error").show();break;case"comingsoon":b(".signup .error-message").show();b(".signup .error-message").text("System Error");break;default:break}}})};a.prototype.getLocale=function(){var k=window.location.pathname.split("/"),d="www",h=d,i="en",g=i,j=window.navigator.language,l={};if(j!=undefined&&j!=null){var f=j.split("_");g=f[0]}if(typeof countrySiteOverride!="undefined"&&countrySiteOverride.length>0){h=countrySiteOverride}else{h=k[1];var e=h.split("-");if(e[1]!=undefined&&e[1].length>0){h=e[0];g=e[1]}}if(g==undefined||g==""){g=i}l.languages=g;l.countrySite=h;return l}};a.prototype={constructor:a};return a})(jQuery);