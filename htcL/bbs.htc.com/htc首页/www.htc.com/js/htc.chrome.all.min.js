jQuery(document).ready(function(a){Providers.loadProvider();HtcChrome.init()});var Providers=(function(){var a={loadProvider:function(){var d=jQuery("header").data("app-version"),f=location.hostname,c=((f.indexOf("10.116.")>=0||f.indexOf("htc.com")>=0||f.indexOf("local")>=0)&&f.indexOf("estore.htc.com")===-1)?"":"//www.htc.com",b=(f.indexOf("10.116.")>=0||f.indexOf("local")>=0||(typeof d==="undefined")||(d===undefined))?"":".min",e=(f.indexOf("10.116.")>=0||f.indexOf("local")>=0||(typeof d==="undefined")||(d===undefined))?"":"/v"+d;switch(jQuery("header").data("cart-provider-type").toUpperCase()){case"DIGITAL_RIVER":if(jQuery("body").hasClass("go")||jQuery("body").hasClass("productdetail")){jQuery("html head").prepend('<script src="'+c+"/assets/layout/js"+e+"/ecommerce/providers/digitalriver"+b+'.js" type="text/javascript"><\/script>')}jQuery("html head").prepend('<script src="'+c+"/assets/layout/js"+e+"/cart-providers/digitalriver"+b+'.js" type="text/javascript"><\/script>');if(typeof CartProvider==="undefined"||cartProvider===undefined){jQuery.getScript(c+"/assets/layout/js"+e+"/cart-providers/digitalriver"+b+".js",function(){shoppingCart.updateCartStatus()})}if(jQuery("body").hasClass("productksp")&&jQuery("body").hasClass("buy_re")){jQuery.getScript(c+"/assets/layout/js"+e+"/adhoc/cart"+b+".js",function(){})}if(jQuery("body").hasClass("buy_3_step_digital_river")){jQuery.getScript(c+"/assets/layout/js"+e+"/kspbuy/kspbuy3stepdigitalriver"+b+".js",function(){})}if(jQuery("body").hasClass("buy_2_step_dr")){jQuery.getScript(c+"/assets/layout/js"+e+"/kspbuy/kspbuy2stepdigitalriver"+b+".js",function(){})}if(jQuery("body").hasClass("buy_expansys_custom")){jQuery.getScript(c+"/assets/layout/js"+e+"/kspbuy/kspbuyexpansyscustom"+b+".js",function(){})}break;case"LUZERN":jQuery("html head").prepend('<script src="'+c+"/assets/layout/js"+e+"/cart-providers/luzern"+b+'.js" type="text/javascript"><\/script>');if(typeof CartProvider==="undefined"||cartProvider===undefined){jQuery.getScript(c+"/assets/layout/js"+e+"/cart-providers/luzern"+b+".js",function(){shoppingCart.updateCartStatus()})}if(jQuery("body").hasClass("productksp")&&jQuery("body").hasClass("buy_re")){jQuery.getScript(c+"/assets/layout/js"+e+"/adhoc/cart"+b+".js",function(){})}if(jQuery("body").hasClass("buy_expansys_custom")){jQuery.getScript(c+"/assets/layout/js"+e+"/kspbuy/kspbuyexpansyscustom"+b+".js",function(){})}break;case"MAGENTO":jQuery("html head").prepend('<script src="'+c+"/assets/layout/js"+e+"/cart-providers/magento"+b+'.js" type="text/javascript"><\/script>');if(typeof CartProvider==="undefined"||cartProvider===undefined){jQuery.getScript(c+"/assets/layout/js"+e+"/cart-providers/magento"+b+".js",function(){shoppingCart.updateCartStatus()})}if(jQuery("body").hasClass("productksp")&&jQuery("body").hasClass("buy_re")){jQuery.getScript(c+"/assets/layout/js"+e+"/adhoc/cart"+b+".js",function(){})}if(jQuery("body").hasClass("buy_expansys_custom")){jQuery.getScript(c+"/assets/layout/js"+e+"/kspbuy/kspbuyexpansyscustom"+b+".js",function(){})}break;default:break}}};return a}());var popOver=(function(){var a={closeAll:function(){jQuery(".popover").removeClass("active")}};return a}());var header=(function(){var a={scrollIntervalID:null,setupMobileNavigation:function(){jQuery(".m-header .has-sub-menu .title").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(jQuery(this).parent().hasClass("expanded")){jQuery(this).parent().toggleClass("expanded")}else{jQuery(".m-header .main-navi-block li").removeClass("expanded");jQuery(this).parent().toggleClass("expanded")}})},setupMobileSubMenuClick:function(){jQuery(".has-third-menu").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}jQuery(this).toggleClass("expanded");jQuery(this).next(".third-menu").toggleClass("expanded")})},setupDesktopMainNavigation:function(){var b=false,d,c;jQuery(".d-header .menu-list").on("mouseleave",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}b=false});jQuery(".d-header .no-sub-menu").on("mouseenter",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}b=false});jQuery(".d-header .has-sub-menu").on("mouseenter",function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}c=1;var f=jQuery(this);if(!b){d=setTimeout(function(){if(c){f.parent().addClass("animated");f.parent().find("li").removeClass("expanded");f.toggleClass("expanded");b=true}},300)}else{f.parent().removeClass("animated");f.parent().find("li").removeClass("expanded");f.toggleClass("expanded")}});jQuery(".d-header .has-sub-menu").on("mouseleave",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}c=0;clearTimeout(d);jQuery(this).removeClass("expanded");jQuery(this).parent().removeClass("animated")});jQuery(".d-header .has-sub-menu .title").on("touchstart",function(g){if(!jQuery("html").hasClass("desktop")){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}var f=jQuery(this).parent();if(f.hasClass("expanded")){f.removeClass("expanded");f.parent().removeClass("animated")}else{f.parent().find("li").removeClass("expanded");f.toggleClass("expanded")}}})},setupDesktopStickyHeader:function(){a.scrollIntervalID=setInterval(b,10);function b(){if(jQuery("html").hasClass("desktop")&&jQuery(".htc-header").is(":visible")&&jQuery(".d-header").is(":visible")){if(jQuery(window).scrollTop()>=jQuery(".d-header").height()/3&&jQuery(window).width()>HtcChrome.mobileMaxWidth){if(jQuery("html").hasClass("csstransforms3d")){jQuery("header").addClass("sticky")}}else{jQuery("header").removeClass("sticky")}}}},removeStickyInterval:function(){clearInterval(a.scrollIntervalID)},setupSignupPopover:function(){var b=jQuery(".signup-popover");if(b.length>0){var d,c;jQuery(".top-item.signup").on("mouseenter",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}c=1;d=setTimeout(function(){if(c){if(!b.hasClass("active")){popOver.closeAll();b.addClass("active")}}},200)});jQuery(".top-item.signup").on("mouseleave",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}c=0;clearTimeout(d);b.removeClass("active")});if(!jQuery("html").hasClass("desktop")){jQuery(".top-item.signup .top-title").on("touchstart",function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}b.toggleClass("active")})}}},setupSignupYNbutton:function(){jQuery(".YN-wrapper").on("click",".Y, .N",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}jQuery(".btnYN").removeClass("active");jQuery(this).addClass("active");jQuery("#ownedHtc").prop("checked",true);jQuery("#HtcSignup").valid()})},setupSignupDropdown:function(){var e=jQuery("#HtcSignup .custom-selector.carrier-selector"),d=e.find(".dropper"),b=e.find(".downer"),c=e.find(".downer ul li");d.click(function(){jQuery(".downer").toggleClass("show")});c.click(function(h){b.removeClass("show");e.find(".downer ul li").removeClass("selected");jQuery(this).addClass("selected");var f=jQuery(this).find(".select-item-text").text(),g=jQuery(this).data("value");d.find(".select-item-text").text(f);d.attr("data-value",g);d.addClass("selected")});e.bind("mouseover",function(){b.addClass("show")});e.bind("mouseout",function(){b.removeClass("show")})},setupSearchQueryPlaceholderForIE:function(){if(jQuery("html").hasClass("no-csstransforms3d")){jQuery(".htc-search-form").find(".query").placeholder()}},setupSearchFormSubmit:function(){if(jQuery("body.support").length){jQuery(".htc-search-form").append('<input type="hidden" name="priority" value="support">');var b=jQuery("meta[name=product_name_id]").attr("content");if(typeof b!=="undefined"){jQuery(".htc-search-form").append('<input type="hidden" name="pid" value="'+b+'">')}}jQuery(".htc-search-form").on("submit",function(c){if(jQuery(this).find(".query").val()===""){return false}})}};return a}());var footer=(function(){var a={duration:300,hideArrow:function(){jQuery(".arrow-block").hide()},resetArrowDown:function(){jQuery(".arrow-block").removeClass("arrow-up");jQuery("footer").removeClass("expanded");jQuery("footer .footer-list").removeClass("expanded")},setupArrowClick:function(){jQuery(".arrow-block").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}a.ArrowClicked()})},ArrowClicked:function(){popOver.closeAll();var c=jQuery(".arrow-block"),d=jQuery("footer"),b=d.find(".footer-list");if(!b.hasClass("expanded")){a.showFooterList()}else{a.hideFooterList()}c.toggleClass("arrow-up",a.duration);b.toggleClass("expanded",a.duration)},showFooterList:function(){var c=jQuery(this),d=jQuery("footer"),b=d.find(".footer-list");if(!b.hasClass("expanded")){b.slideDown(a.duration);if(jQuery(window).width()<HtcChrome.mobileMaxWidth||jQuery(".htc-footer").css("position")==="relative"){jQuery("html, body").stop().animate({scrollTop:jQuery(document).height()},800)}}},hideFooterList:function(){var c=jQuery(this),d=jQuery("footer"),b=d.find(".footer-list");if(b.hasClass("expanded")){b.slideUp(a.duration)}},setupConnectPopover:function(){jQuery(".connect-block .click-area").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}a.hideFooterList();if(!jQuery(".connect-popover").hasClass("active")){popOver.closeAll();a.resetArrowDown();jQuery(".connect-popover").addClass("active")}else{jQuery(".connect-popover").removeClass("active")}})},setupRegionPopover:function(){jQuery(".region-block .click-area").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}a.hideFooterList();if(!jQuery(".region-popover").hasClass("active")){popOver.closeAll();a.resetArrowDown();jQuery(".region-popover").addClass("active")}else{jQuery(".region-popover").removeClass("active")}});jQuery(".region-popover .list-closer").on("click",function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}jQuery(".region-popover").removeClass("active")})},showDeepBottom:function(c,b){jQuery(".deep-bottom").addClass("show");if(c!==undefined){jQuery(".deep-bottom").css("height",c)}if(b!==undefined){jQuery(".deep-bottom").css("background-color",b)}},setupCookieConsent:function(){var d=location.hostname,c=(typeof jQuery("body").data("site")!=="undefined")?jQuery("body").data("site"):jQuery("html").data("site"),f=jQuery(".cookie-consent"),b=jQuery(".cookie-consent-header"),e="htc-cookie-consent-"+c;if((d.indexOf("htc.com")>=0||d.indexOf("local")>=0)&&d.indexOf("estore.htc.com")===-1&&typeof f!=="undefined"){if(readCookie(e)===null){f.show();f.find(".accept-btn").bind("click",function(g){createCookie(e,1,180);b.hide()})}f.find(".refuse-btn").bind("click",function(g){})}}};return a}());var signup=(function(){var a;var b={init:function(){var c=new Site();b.setupValidation();if(jQuery("html").hasClass("no-csstransforms3d")){jQuery("#HtcSignup").find(".input-text").placeholder()}jQuery(".checker-wrapper .checker label").on("click",function(){if(jQuery(".checker-wrapper .context").hasClass("notvalid")){jQuery(".checker-wrapper .context").removeClass("notvalid")}});header.setupSignupYNbutton();header.setupSignupDropdown();jQuery('#HtcSignup input[type="submit"]').on("click",function(d){if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}if(jQuery("#HtcSignup").valid()===false){return false}else{if(typeof c!=="undefined"){c.subscriptionSubmission("header","header")}}})},setupValidation:function(){if(jQuery.validator===undefined){return true}jQuery.validator.addMethod("specialchars",function(e,d){var c=isEmail(e);return c});jQuery("#HtcSignup").validate({errorClass:"error",errorElement:"div",invalidHandler:function(d,c){},errorPlacement:function(c,d){switch(jQuery(d).attr("name")){case"ownedHtc":c.insertAfter(jQuery(".question-wrapper"));break;case"subscriptchecker":jQuery(".checker-wrapper .context").addClass("notvalid");break;default:c.insertAfter(d);break}},debug:true})}};return b}());var shoppingCart=(function(){var a={cartItemTemplate:"",init:function(){var b=this;b.cartItemTemplate=jQuery(".cart-popover").find(".prod-item");b.showCartZero()},showCartZero:function(){var b=this,d=jQuery(".cart-popover"),c=d.find(".subtotal-amt");d.removeClass("enable-popover");d.removeClass("active");jQuery(".cartCount").text("0");c.html("");b.unbindCartPopover()},updateCartStatus:function(){var d=this;try{var g=new CartProvider(),h=jQuery(".cart-popover"),i=h.find(".prod-list"),c=h.find(".checkout"),f=h.find(".subtotal-amt"),b=jQuery(".m-header .cart-tab .checkout");if(typeof g!=="undefined"){g.getCart(function(j){if(typeof j!=="undefined"&&j.items&&j.items.length>0){jQuery(".cartCount").text(j.totalItems);if(j.totalItems<=0){return}else{jQuery(".cart-popover").addClass("enable-popover");d.setupCartPopover()}i.empty();jQuery.each(j.items,function(s,l){var q=jQuery(this),p=q[0].image,o=q[0].quantity,u=q[0].name,k=q[0].id,r=q[0].price,m=q[0].saleprice,t=d.cartItemTemplate.clone(),n='<span class="original">'+r+"</span>",v='<span class="onsale">'+m+"</span>";t.find(".prod-name").text(u);t.find(".prod-quantity").text("("+o+")");if((typeof m!=="undefined")&&m!==r){t.find(".prod-price").addClass("strike").html(n+v)}else{t.find(".prod-price").html(v)}t.find(".prod-img img").attr("src",p);t.attr("data-id",k);i.append(t)});i.find(".prod-delete").on("click",function(l){if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}var k=jQuery(this).closest(".prod-item"),m=k.data("id");g.removeItemFromCart(m,function(){k.remove();d.updateCartStatus()})});c.on("click",function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}location.href=j.checkoutURL});b.on("click",function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}location.href=j.checkoutURL});f.html(j.subTotal)}else{d.showCartZero()}})}else{d.showCartZero()}}catch(e){d.showCartZero()}},setupCartPopover:function(){var c=jQuery(".d-header"),f=c.find(".cart-popover"),b=c.find(".top-item.store-cart"),g=c.find(".top-item.store-cart > .top-title"),e=b.find(".cartCount").text();if(f!==null&&f.length>0&&f.hasClass("enable-popover")&&e!=="0"){var h,d;b.on("mouseenter",function(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}if(!f.hasClass("active")&&e!=="0"){popOver.closeAll();f.addClass("active")}});b.on("mouseleave",function(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}f.removeClass("active")});if(!jQuery("html").hasClass("desktop")){g.on("touchstart",function(i){i.stopImmediatePropagation();if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}f.toggleClass("active")})}}},unbindCartPopover:function(){var c=jQuery(".d-header"),d=c.find(".cart-popover"),b=c.find(".top-item.store-cart"),e=c.find(".top-item.store-cart > .top-title");b.unbind("mouseenter mouseleave");d.unbind("mouseenter mouseleave");e.unbind("touchstart")}};return a}());var signupPopOver=(function(){var c={cookieName:"htc-has-read-signup-popup",containerClassName:"signup-popup-container"},b;var a={init:function(){if(typeof jQuery.cookie(c.cookieName)==="undefined"){b=jQuery("."+c.containerClassName);a.setupValidate();a.setupOwnHtcBtn();a.setupSubmitBtn();a.setupCloseBtn();a.showModal()}},addCookie:function(){jQuery.cookie(c.cookieName,true,{expires:90,path:"/"})},setupValidate:function(){jQuery.validator.addMethod("specialchars",function(f,e){var d=isEmail(f);return d});jQuery.validator.addMethod("ownhtc",function(e,d){return b.find(".btnYN").hasClass("active")})},setupCloseBtn:function(){b.find(".btn-close").off("click").on("click",function(){a.addCookie();a.hideModal()})},setupOwnHtcBtn:function(){b.find(".btnYN").off("click").on("click",function(){jQuery(".btnYN").removeClass("active");jQuery(this).addClass("active");jQuery(".form-signup").valid()})},getLocaleInfo:function(){var g=window.location.pathname.split("/"),k=jQuery("body").data("site"),h=k,j="en",i=j,e=window.navigator.language,d={};if(e!==undefined&&e!==null){var f=e.split("_");i=f[0]}if(i===undefined||i===""){i=j}d.languages=i;d.countrySite=h;return d},setupSubmitBtn:function(){b.find(".form-signup .submit").on("click",function(){if(b.find(".form-signup").valid()===false){return false}else{var j=function(k){return k<10?"0"+k:k};var i,g=a.getLocaleInfo(),h=(b.find("input[name=yes]").hasClass("active"))?"customer":"prospect",d=new Date(),e=d.getUTCFullYear()+"-"+j(d.getUTCMonth()+1)+"-"+j(d.getUTCDate())+"T"+j(d.getUTCHours())+":"+j(d.getUTCMinutes())+":"+j(d.getUTCSeconds())+"-00:00",f={app_id:"htc-newsletter",email:b.find(".mail").val(),lang:g.languages,zip:"",country:g.countrySite,ip:"0.0.0.0",date:e,s_type:h,s_agreement:"true",s_welcome:"true",s_newsletter:"true",s_product:"false",r_url:location.href,r_campaign:"newsletter",r_cta:"signup-popup",r_pid:"",r_pname:"",ws_echo:"false"};if(location.hostname==="www.htc.com"){i="https://ws.htc.com/htc-subscription-1.6/profile"}else{i="https://adev-ws.htc.com/htc-subscription-1.6/profile"}jQuery.ajax({url:i,type:"GET",dataType:"json",data:f,jsonp:true,async:true,}).done(function(){b.find(".form-block").addClass("hide");b.find(".thank-you-block").addClass("show")}).fail(function(){}).always(function(){})}})},showModal:function(){b.addClass("show");jQuery("body").addClass("fixed")},hideModal:function(){b.removeClass("show");jQuery("body").removeClass("fixed")}};return a}());var HtcChrome=(function(){var a={init:function(){footer.setupCookieConsent();header.setupMobileNavigation();header.setupMobileSubMenuClick();header.setupDesktopMainNavigation();header.setupDesktopStickyHeader();footer.setupArrowClick();footer.setupConnectPopover();footer.setupRegionPopover();header.setupSearchFormSubmit();header.setupSearchQueryPlaceholderForIE();if(jQuery(".signup-popup-container").length>0){$.when($.getScript("/assets/layout/js/vendor/jquery.validate.min.js"),$.getScript("/assets/layout/js/vendor/jquery.cookie.js"),$.Deferred(function(b){$(b.resolve)})).done(function(){signupPopOver.init()})}if(jQuery(".htc-chrome").find(".top-navi-block li.signup").length>0){header.setupSignupPopover();$.when($.getScript("/assets/layout/js/vendor/jquery.validate.min.js"),$.Deferred(function(b){$(b.resolve)})).done(function(){signup.init()})}if(jQuery(".htc-chrome").find(".top-navi-block li.store-cart").length>0){shoppingCart.init();shoppingCart.updateCartStatus()}a.setHeaderFooterButton()},setHeaderFooterButton:function(){if(jQuery(".header-button")!==undefined){jQuery(".header-button").unbind("click").click(function(){a.showHeader(true,true)})}if(jQuery(".footer-button")!==undefined){jQuery(".footer-button").unbind("click").click(function(){a.showFooter(true,true)})}jQuery(".chrome-overlay").click(function(){if(jQuery(".header-button").html()!==undefined){a.hideHeader(true)}if(jQuery(".footer-button").html()!==undefined){a.hideFooter(true,true)}})},hideHeader:function(c,d){c=typeof c!=="undefined"?c:false;d=typeof d!=="undefined"?d:false;var b="-"+jQuery("#htc-header").height()+"px";jQuery("#htc-header").animate({top:b,opacity:0.7},300);jQuery("#htc-header").hide();if(c){jQuery(".chrome-overlay").fadeOut(300)}},hideFooter:function(c,e){c=typeof c!=="undefined"?c:false;e=typeof e!=="undefined"?e:false;var d="-"+jQuery("#htc-footer").height()+"px";jQuery("#htc-footer").animate({bottom:d,opacity:0.7},footer.duration);jQuery("#htc-footer").hide(footer.duration);var b=jQuery("#htc-footer").find(".footer-list");if(b.hasClass("expanded")){b.removeClass("expanded",footer.duration);b.hide(footer.duration)}if(c){jQuery(".chrome-overlay").fadeOut(footer.duration)}},showHeader:function(b,c){b=typeof b!=="undefined"?b:false;c=typeof c!=="undefined"?c:false;jQuery("#htc-header").show();jQuery("#htc-header").animate({top:0,opacity:1},300);if(b){jQuery(".chrome-overlay").fadeIn(300)}},showFooter:function(b,c){b=typeof b!=="undefined"?b:false;c=typeof c!=="undefined"?c:false;if(c){footer.hideArrow();footer.ArrowClicked()}jQuery("#htc-footer").show();jQuery("#htc-footer").animate({bottom:0,opacity:1},footer.duration);if(b){jQuery(".chrome-overlay").fadeIn(footer.duration)}},showDeepBottom:function(c,b){footer.showDeepBottom(c,b)},detectFooterButton:function(){if(jQuery(window).width()>a.mobileMaxWidth){jQuery(".footer-button").hide();if(jQuery("html").hasClass("no-csstransforms3d")){a.showFooter()}else{if(jQuery(".slide-nav ul li").last().hasClass("active")){jQuery(".slide-nav").addClass("uplift");a.showFooter()}else{jQuery(".slide-nav").removeClass("uplift");a.hideFooter()}}}},mobileMaxWidth:720,duration:footer.duration};return a}());function createCookie(c,d,e){var a;if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)};
